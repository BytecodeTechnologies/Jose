
@{
   
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <div>
        <label>Image</label>
        <input type="file" id="file" name="file" multiple />
        <div id="image-holder" style="width:10px;"></div>
      
            <img id="imgblogPreview" class="thumb-image" />
       


    </div>

        <input type="button" id="btnSaveBlog" class="read-more2 lgbtn" value="Add" />
    
</body>
</html>


<script src="~/Scripts/jquery-1.10.2.js"></script>
<script src="~/Scripts/jquery-1.10.2.min.js"></script>
<script>
    $("#file").on('change', function () {
     //   $('#imgblogPreview').hide();
        //Get count of selected files
        var countFiles = $(this)[0].files.length;
        var imgPath = $(this)[0].value;
        var extn = imgPath.substring(imgPath.lastIndexOf('.') + 1).toLowerCase();
        var image_holder = $("#image-holder");
        image_holder.empty();
        if (extn == "gif" || extn == "png" || extn == "jpg" || extn == "jpeg") {
            if (typeof (FileReader) != "undefined") {
                //loop for each file selected for uploaded.
                for (var i = 0; i < countFiles; i++) {
                    var reader = new FileReader();
                    reader.onload = function (e) {
                        $("<img />", {
                            "src": e.target.result,
                            "class": "thumb-image"
                        }).appendTo(image_holder);
                    }
                    image_holder.show();
                    reader.readAsDataURL($(this)[0].files[i]);
                    $('.loadercont').fadeOut();
                }
            } else {
                $('.loadercont').fadeOut();
                alert("This browser does not support FileReader.");

            }
        } else {
            $('.loadercont').fadeOut();
            alert("Pls select only images");

        }
    });

    $("#btnSaveBlog").click(function () {
        debugger;
        var files = $("#file").get(0).files;
        var data = new FormData();
     

        // if (files.length > 0) {
        data.append("file", files[0]);
        $.ajax({
            type: "POST",
            url: "/Test/SaveImage",
            data: data,
            processData: false,
            contentType: false,
            dataType: "json",
            success: function (response) {
                alert(response);
               
            },
            error: function (response) {
                $('.loadercont').fadeOut();
            }
        });


    });
</script>
